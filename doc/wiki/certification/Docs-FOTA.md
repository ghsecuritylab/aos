AliOS Things FOTA测试规范
=====================

FOTA
----

### 设备正常升级流程

| 测试用例编号 | AOS-4-1                                                                                                                                                                                                  |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 测试用例     | 设备正常升级流程                                                                                                                                                                                         |
| 测试目的     | 验证设备能否正常升级                                                                                                                                                                                     |
| 测试属性     | 必选 \| P0 \| 功能用例                                                                                                                                                                                   |
| 测试设备     | 1.设备，2.串口线，3.PC                                                                                                                                                                                   |
| 测试预置条件 | \-设备联网 <br>-制作高版本固件                                                                                                                                                                         |
| 测试步骤     | \-设备登录并保持在线状态 <br>-APP或者Web页面触发升级动作 <br>-等待设备升级完成并重启                                                                                                                 |
| 预期结果     | \-设备接收升级指令并在升级成功后设备重启 <br>-升级完成后的版本为制作的升级包版本 <br>-Web页面上显示升级成功且版本号为升级包版本 <br>-系统无crash，fail，error，assert，abort，内存泄漏，阻塞等异常 |
| 备注         |                                                                                                                                                                                                          |

### 下载固件被中断

| 测试用例编号 | AOS-4-2                                                                                                                                                           |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 测试用例     | 下载固件被中断                                                                                                                                                    |
| 测试目的     | 验证设备下载固件的过程被中断后设备不进行升级                                                                                                                      |
| 测试属性     | 必选 \| P0 \| 稳定性用例                                                                                                                                          |
| 测试设备     | 1.设备，2.串口线，3.PC                                                                                                                                            |
| 测试预置条件 | \-设备联网 <br>-制作高版本固件                                                                                                                                  |
| 测试步骤     | \-设备登录并保持在线状态 <br>-APP或Web页面触发升级动作 <br>-下载固件过程中断开网络连接                                                                        |
| 预期结果     | \-设备接收升级指令后下载高版本固件 <br>-网络断开后升级失败，系统重启后正常运行，版本号不变 <br>-系统无crash，fail，error，assert，abort，内存泄漏，阻塞等异常 |
| 备注         |                                                                                                                                                                   |

### 升级过程关闭电源

| 测试用例编号 | AOS-4-3                                                                                                                                           |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| 测试用例     | 升级过程关闭电源                                                                                                                                  |
| 测试目的     | 验证设备过程关闭电源中断升级                                                                                                                      |
| 测试属性     | 必选 \| P0 \| 稳定性用例                                                                                                                          |
| 测试设备     | 1.设备，2.串口线，3.PC                                                                                                                            |
| 测试预置条件 | \-设备联网 <br>-制作高版本固件                                                                                                                  |
| 测试步骤     | \-设备登录并保持在线状态 <br>-APP或Web页面触发升级动作 <br>-下载固件完成后，在擦写flash升级过程设备断电                                       |
| 预期结果     | \-设备接收升级指令后下载高版本固件 <br>-设备断电重启后正常运行，版本号不变 <br>-系统无crash，fail，error，assert，abort，内存泄漏，阻塞等异常 |
| 备注         |                                                                                                                                                   |

### 设备反复升级稳定性

| 测试用例编号 | AOS-4-4                                                                                   |
| ------------ | ----------------------------------------------------------------------------------------- |
| 测试用例     | 设备反复升级稳定性                                                                        |
| 测试目的     | 验证设备反复升级稳定性                                                                    |
| 测试属性     | 必选 \| P0 \| 稳定性用例                                                                  |
| 测试设备     | 1.设备，2.串口线，3.PC                                                                    |
| 测试预置条件 | \-设备联网 <br>-制作高版本固件                                                          |
| 测试步骤     | \-设备登录并保持在线状态 <br>-运行自动化脚本，定时循环触发升级 <br>-持续运行12小时    |
| 预期结果     | \-设备升级成功率≥99% <br>-系统无crash，fail，error，assert，abort，内存泄漏，阻塞等异常 |
| 备注         |                                                                                           |
